<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>HTML Model</title>
    <script>
    window.onload = function() {      
      var foo = document.getElementById('foo');
      var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          console.log('mutation.type = ' + mutation.type);
          switch(mutation.type) {
            case 'childList':
              for (var i = 0; i < mutation.addedNodes.length; i++) {
                console.log('content: added, ' + mutation.addedNodes);
              }          
              for (var i = 0; i < mutation.removedNodes.length; i++) {
                console.log('content: remove, ' +mutation.removedNodes);
              }
              break;
            case 'attributes':
              console.log('content: ' + mutation.attributeName);
              break;
          }

        });
      });
      observer.observe(foo, {
        childList: true,
        attributes: true,
        subtree: true,
      });
      var bar = document.createElement('div');
      bar.textContent = 'bar';
      console.log('before append');
      foo.appendChild(bar);
      foo.removeChild(bar);
      console.log('after remove');
    }
    </script>
  </head>
  <body>
    <div id='foo'></div>
    <br>
    <br>
  </body>
</html>
